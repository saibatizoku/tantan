<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.0//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">
<svg viewBox="0 0 1408 1856" xmlns="http://www.w3.org/2000/svg" xmlns:inkspace="http://www.inkscape.org/namespaces/inkscape" xmlns:xlink="http://www.w3.org/1999/xlink">
  <defs id="defs_block">
    <filter height="1.504" id="filter_blur" inkspace:collect="always" width="1.1575" x="-0.07875" y="-0.252">
      <feGaussianBlur id="feGaussianBlur3780" inkspace:collect="always" stdDeviation="4.2" />
    </filter>
  </defs>
  <title>blockdiag</title>
  <desc>seqdiag {

  === Load website application ===

  user     -&gt; browser [label = "Load website URL"];
              browser  -&gt; webserver [label = "GET /index.html"];
              browser  &lt;- webserver [label = "HTTP RESPONSE"];
              browser  -&gt; browser-app [label = "Trigger initial JavaScript App events"];
              browser-app  -&gt; browser-controller [label = "start()"];

              === WAMP Service is unavailable ===
              
              browser-controller  -&gt; browser-api [label = "start()"];
              browser-api  -&gt; wampserver [label = "connect()"];
              browser-api  &lt;- wampserver [label = "Return connection info"];
              browser-api -&gt; browser-api  [label = "Attempt reconnect"];
              browser-controller  &lt;- browser-api [label = "Trigger 'wamp:failure'"];
  
              === WAMP Service is available ===

              //browser-controller&lt;- browser-api [label = "Trigger connection-related code"];
              browser-controller  -&gt; browser-api [label = "start()"];
              browser-api  -&gt; wampserver [label = "connect()"];
              browser-api  &lt;- wampserver [label = "Return connection info"];
              browser-api  -&gt; wampserver [label = "Start WAMP RPC\nWAMP PubSub"];
              browser-api  &lt;- wampserver [label = "WAMP RPC\nWAMP PubSub service"];
              browser-api  -&gt; wampserver [label = "Ask for content data"];
              browser-api  &lt;- wampserver [label = "Content data"];
              browser-controller  &lt;- browser-api [label = "Trigger 'wamp:session'"];

              ===  ===

              browser-app &lt;- browser-controller [label = "Trigger HTML updates"];
              browser  &lt;- browser-app [label = "Load HTML for\n logged-out users"];
  user     &lt;- browser [label = "Show initial website"];
}
</desc>
  <rect fill="rgb(0,0,0)" height="1708" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="8" x="127" y="126" />
  <rect fill="rgb(0,0,0)" height="1570" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="8" x="319" y="218" />
  <rect fill="rgb(0,0,0)" height="62" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="8" x="511" y="282" />
  <rect fill="rgb(0,0,0)" height="1318" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="8" x="703" y="408" />
  <rect fill="rgb(0,0,0)" height="1178" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="8" x="895" y="473" />
  <rect fill="rgb(0,0,0)" height="283" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="8" x="1087" y="618" />
  <rect fill="rgb(0,0,0)" height="461" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="8" x="1087" y="1046" />
  <rect fill="rgb(0,0,0)" height="63" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="8" x="1279" y="683" />
  <rect fill="rgb(0,0,0)" height="63" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="8" x="1279" y="1111" />
  <rect fill="rgb(0,0,0)" height="72" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="8" x="1279" y="1246" />
  <rect fill="rgb(0,0,0)" height="62" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="8" x="1279" y="1381" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="67" y="46" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="259" y="46" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="451" y="46" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="643" y="46" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="835" y="46" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="1027" y="46" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="1219" y="46" />
  <path d="M 128 80 L 128 1844" fill="none" stroke="rgb(0,0,0)" stroke-dasharray="8 4" />
  <rect fill="moccasin" height="1708" stroke="rgb(0,0,0)" width="8" x="124" y="120" />
  <path d="M 320 80 L 320 1844" fill="none" stroke="rgb(0,0,0)" stroke-dasharray="8 4" />
  <rect fill="moccasin" height="1570" stroke="rgb(0,0,0)" width="8" x="316" y="212" />
  <path d="M 512 80 L 512 1844" fill="none" stroke="rgb(0,0,0)" stroke-dasharray="8 4" />
  <rect fill="moccasin" height="62" stroke="rgb(0,0,0)" width="8" x="508" y="276" />
  <path d="M 704 80 L 704 1844" fill="none" stroke="rgb(0,0,0)" stroke-dasharray="8 4" />
  <rect fill="moccasin" height="1318" stroke="rgb(0,0,0)" width="8" x="700" y="402" />
  <path d="M 896 80 L 896 1844" fill="none" stroke="rgb(0,0,0)" stroke-dasharray="8 4" />
  <rect fill="moccasin" height="1178" stroke="rgb(0,0,0)" width="8" x="892" y="467" />
  <path d="M 1088 80 L 1088 1844" fill="none" stroke="rgb(0,0,0)" stroke-dasharray="8 4" />
  <rect fill="moccasin" height="283" stroke="rgb(0,0,0)" width="8" x="1084" y="612" />
  <rect fill="moccasin" height="461" stroke="rgb(0,0,0)" width="8" x="1084" y="1040" />
  <path d="M 1280 80 L 1280 1844" fill="none" stroke="rgb(0,0,0)" stroke-dasharray="8 4" />
  <rect fill="moccasin" height="63" stroke="rgb(0,0,0)" width="8" x="1276" y="677" />
  <rect fill="moccasin" height="63" stroke="rgb(0,0,0)" width="8" x="1276" y="1105" />
  <rect fill="moccasin" height="72" stroke="rgb(0,0,0)" width="8" x="1276" y="1240" />
  <rect fill="moccasin" height="62" stroke="rgb(0,0,0)" width="8" x="1276" y="1375" />
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="64" y="40" />
  <text fill="rgb(0,0,0)" font-family="sansserif" font-size="11" font-style="normal" font-weight="normal" x="117" y="64">user</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="256" y="40" />
  <text fill="rgb(0,0,0)" font-family="sansserif" font-size="11" font-style="normal" font-weight="normal" x="299" y="64">browser</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="448" y="40" />
  <text fill="rgb(0,0,0)" font-family="sansserif" font-size="11" font-style="normal" font-weight="normal" x="486" y="64">webserver</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="640" y="40" />
  <text fill="rgb(0,0,0)" font-family="sansserif" font-size="11" font-style="normal" font-weight="normal" x="672" y="65">browser-app</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="832" y="40" />
  <text fill="rgb(0,0,0)" font-family="sansserif" font-size="11" font-style="normal" font-weight="normal" x="848" y="64">browser-controller</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="1024" y="40" />
  <text fill="rgb(0,0,0)" font-family="sansserif" font-size="11" font-style="normal" font-weight="normal" x="1058" y="65">browser-api</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="1216" y="40" />
  <text fill="rgb(0,0,0)" font-family="sansserif" font-size="11" font-style="normal" font-weight="normal" x="1249" y="65">wampserver</text>
  <path d="M 136 212 L 312 212" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="304,208 312,212 304,216" stroke="rgb(0,0,0)" />
  <path d="M 328 276 L 504 276" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="496,272 504,276 496,280" stroke="rgb(0,0,0)" />
  <path d="M 328 338 L 504 338" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="336,334 328,338 336,342" stroke="rgb(0,0,0)" />
  <path d="M 328 402 L 696 402" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="688,398 696,402 688,406" stroke="rgb(0,0,0)" />
  <path d="M 712 467 L 888 467" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="880,463 888,467 880,471" stroke="rgb(0,0,0)" />
  <path d="M 904 612 L 1080 612" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="1072,608 1080,612 1072,616" stroke="rgb(0,0,0)" />
  <path d="M 1096 677 L 1272 677" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="1264,673 1272,677 1264,681" stroke="rgb(0,0,0)" />
  <path d="M 1096 740 L 1272 740" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="1104,736 1096,740 1104,744" stroke="rgb(0,0,0)" />
  <path d="M 1096 814 L 1184 814" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 1184 814 L 1184 830" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 1184 830 L 1096 830" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="1104,826 1096,830 1104,834" stroke="rgb(0,0,0)" />
  <path d="M 904 895 L 1080 895" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="912,891 904,895 912,899" stroke="rgb(0,0,0)" />
  <path d="M 904 1040 L 1080 1040" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="1072,1036 1080,1040 1072,1044" stroke="rgb(0,0,0)" />
  <path d="M 1096 1105 L 1272 1105" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="1264,1101 1272,1105 1264,1109" stroke="rgb(0,0,0)" />
  <path d="M 1096 1168 L 1272 1168" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="1104,1164 1096,1168 1104,1172" stroke="rgb(0,0,0)" />
  <path d="M 1096 1240 L 1272 1240" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="1264,1236 1272,1240 1264,1244" stroke="rgb(0,0,0)" />
  <path d="M 1096 1312 L 1272 1312" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="1104,1308 1096,1312 1104,1316" stroke="rgb(0,0,0)" />
  <path d="M 1096 1375 L 1272 1375" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="1264,1371 1272,1375 1264,1379" stroke="rgb(0,0,0)" />
  <path d="M 1096 1437 L 1272 1437" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="1104,1433 1096,1437 1104,1441" stroke="rgb(0,0,0)" />
  <path d="M 904 1501 L 1080 1501" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="912,1497 904,1501 912,1505" stroke="rgb(0,0,0)" />
  <path d="M 712 1645 L 888 1645" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="720,1641 712,1645 720,1649" stroke="rgb(0,0,0)" />
  <path d="M 328 1720 L 696 1720" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="336,1716 328,1720 336,1724" stroke="rgb(0,0,0)" />
  <path d="M 136 1782 L 312 1782" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="144,1778 136,1782 144,1786" stroke="rgb(0,0,0)" />
  <text fill="rgb(0,0,0)" font-family="sansserif" font-size="11" font-style="normal" font-weight="normal" x="140" y="210">Load website URL</text>
  <text fill="rgb(0,0,0)" font-family="sansserif" font-size="11" font-style="normal" font-weight="normal" x="332" y="274">GET /index.html</text>
  <text fill="rgb(0,0,0)" font-family="sansserif" font-size="11" font-style="normal" font-weight="normal" x="415" y="336">HTTP RESPONSE</text>
  <text fill="rgb(0,0,0)" font-family="sansserif" font-size="11" font-style="normal" font-weight="normal" x="332" y="400">Trigger initial JavaScript App events</text>
  <text fill="rgb(0,0,0)" font-family="sansserif" font-size="11" font-style="normal" font-weight="normal" x="716" y="465">start()</text>
  <text fill="rgb(0,0,0)" font-family="sansserif" font-size="11" font-style="normal" font-weight="normal" x="908" y="610">start()</text>
  <text fill="rgb(0,0,0)" font-family="sansserif" font-size="11" font-style="normal" font-weight="normal" x="1100" y="675">connect()</text>
  <text fill="rgb(0,0,0)" font-family="sansserif" font-size="11" font-style="normal" font-weight="normal" x="1151" y="738">Return connection info</text>
  <text fill="rgb(0,0,0)" font-family="sansserif" font-size="11" font-style="normal" font-weight="normal" x="1096" y="807">Attempt reconnect</text>
  <text fill="rgb(0,0,0)" font-family="sansserif" font-size="11" font-style="normal" font-weight="normal" x="970" y="893">Trigger 'wamp:failure'</text>
  <text fill="rgb(0,0,0)" font-family="sansserif" font-size="11" font-style="normal" font-weight="normal" x="908" y="1038">start()</text>
  <text fill="rgb(0,0,0)" font-family="sansserif" font-size="11" font-style="normal" font-weight="normal" x="1100" y="1103">connect()</text>
  <text fill="rgb(0,0,0)" font-family="sansserif" font-size="11" font-style="normal" font-weight="normal" x="1151" y="1166">Return connection info</text>
  <text fill="rgb(0,0,0)" font-family="sansserif" font-size="11" font-style="normal" font-weight="normal" x="1100" y="1228">Start WAMP RPC</text>
  <text fill="rgb(0,0,0)" font-family="sansserif" font-size="11" font-style="normal" font-weight="normal" x="1100" y="1238">WAMP PubSub</text>
  <text fill="rgb(0,0,0)" font-family="sansserif" font-size="11" font-style="normal" font-weight="normal" x="1213" y="1300">WAMP RPC</text>
  <text fill="rgb(0,0,0)" font-family="sansserif" font-size="11" font-style="normal" font-weight="normal" x="1156" y="1310">WAMP PubSub service</text>
  <text fill="rgb(0,0,0)" font-family="sansserif" font-size="11" font-style="normal" font-weight="normal" x="1100" y="1373">Ask for content data</text>
  <text fill="rgb(0,0,0)" font-family="sansserif" font-size="11" font-style="normal" font-weight="normal" x="1203" y="1435">Content data</text>
  <text fill="rgb(0,0,0)" font-family="sansserif" font-size="11" font-style="normal" font-weight="normal" x="964" y="1499">Trigger 'wamp:session'</text>
  <text fill="rgb(0,0,0)" font-family="sansserif" font-size="11" font-style="normal" font-weight="normal" x="773" y="1643">Trigger HTML updates</text>
  <text fill="rgb(0,0,0)" font-family="sansserif" font-size="11" font-style="normal" font-weight="normal" x="618" y="1706">Load HTML for</text>
  <text fill="rgb(0,0,0)" font-family="sansserif" font-size="11" font-style="normal" font-weight="normal" x="609" y="1718">logged-out users</text>
  <text fill="rgb(0,0,0)" font-family="sansserif" font-size="11" font-style="normal" font-weight="normal" x="210" y="1780">Show initial website</text>
  <path d="M 40 138 L 629 138" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 40 142 L 629 142" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 779 138 L 1368 138" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 779 142 L 1368 142" fill="none" stroke="rgb(0,0,0)" />
  <rect fill="rgb(208,208,208)" height="18" stroke="rgb(0,0,0)" width="150" x="629" y="131" />
  <text fill="rgb(0,0,0)" font-family="sansserif" font-size="11" font-style="normal" font-weight="normal" x="639" y="145">Load website application</text>
  <path d="M 40 535 L 621 535" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 40 539 L 621 539" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 787 535 L 1368 535" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 787 539 L 1368 539" fill="none" stroke="rgb(0,0,0)" />
  <rect fill="rgb(208,208,208)" height="16" stroke="rgb(0,0,0)" width="166" x="621" y="529" />
  <text fill="rgb(0,0,0)" font-family="sansserif" font-size="11" font-style="normal" font-weight="normal" x="631" y="541">WAMP Service is unavailable</text>
  <path d="M 40 963 L 628 963" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 40 967 L 628 967" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 780 963 L 1368 963" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 780 967 L 1368 967" fill="none" stroke="rgb(0,0,0)" />
  <rect fill="rgb(208,208,208)" height="16" stroke="rgb(0,0,0)" width="152" x="628" y="957" />
  <text fill="rgb(0,0,0)" font-family="sansserif" font-size="11" font-style="normal" font-weight="normal" x="638" y="969">WAMP Service is available</text>
  <path d="M 40 1569 L 702 1569" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 40 1573 L 702 1573" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 706 1569 L 1368 1569" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 706 1573 L 1368 1573" fill="none" stroke="rgb(0,0,0)" />
  <rect fill="rgb(208,208,208)" height="4" stroke="rgb(0,0,0)" width="4" x="702" y="1569" />
</svg>
