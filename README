Acerca de el sistema TanTán
===========================

El sistema TanTán está hecho para ser una herramienta libre y gratuita, cuyo
propósito es el de automatizar tareas cotidianas en el cultivo de peces.

Es un sistema con múltiples componentes de software libre, principalmente
utilizando Python, HTML, CSS y JavaScript como lenguajes de programación.



Funcionalidad
-------------
* Servicios de publicación web
  - Utilizando HTTP, WebSockets

* Servicios de captura de datos de sensores
  - Servicios de comunicación con redes de dispositivos ZigBee

En esta versión del sistema TanTán, está construída sobre la plataforma
para redes [Twisted](http://www.twistedmatrix.com).



Para ejecutar el sistema
------------------------

Existe un plugin para utilizarse con el script de línea de comando _twistd_.

Para ejecutarlo, desde una consola de sistema, acceder a la carpeta 'tantan'
e invocar el siguiente comando:

$ twistd -n tantan-couch

y para consultar las opciones disponibles, invocar el comando de ayuda:

$ twistd tantan-couch --help



Modularidad del sistema
-----------------------

Los módulos principales del sistema son:

1. Módulo de comunicaciones
  1. Módulo de servicios web
2. Módulo de bases de datos
3. Módulo de sensores inalámbricos
  1. Módulo de comunicaciones seriales

#FIXME

# Instalaciones con virtualenv activado
_Creado por saibatizoku. 19/sep/2013_


## Para _Twisted_

*    __Twisted__
    pip install zope.interface
    pip install pyOpenSSL
    src/Twisted/python setup.py develop

*    __PyCrypto__
    pip install pyasn1
    src/PyCrypto/python setup.py build
    src/PyCrypto/python setup.py develop

*    __CouchDB__
    src/paisley/python setup.py develop

## Para XBee
*   __PySerial__
    pip install pySerial

*   __XBee__
    hg clone https://code.google.com/p/python-xbee/
    cd python-xbee
    python setup.py install


## Para WebSockets

*   __AutobahnPython__
    git clone git://github.com/tavendo/AutobahnPython.git
    cd AutobahnPython
    git checkout v0.5.2
    cd autobahn
    python setup.py install


(OPCIONALES)
## NumPy (<- procesamiento eficiente de datos numéricos)

    pip install numpy

## Para _IPython con [zmq,qtconsole,notebook,test]_

*   __IPython__
    pip install ipython[zmq,qtconsole,notebook,test]


## zeroMQ & txZMQ (<- sin uso actual)

    pip install pyzmq
    #para twisted
    pip install txZMQ


Notas de desarrollo:
--------------------

* Autenticación WAMP-CRA:

AutoBahn permite la implementación de WAMP-CRA como sistema de autenticación
de usuarios. En TanTán, las credenciales enviadas desde el cliente web son:
__nombre de usuario__ y __contraseña__.

El proceso de autenticación puede resumirse en las siguientes etapas:

1. El usuario escribe su nombre de usuario y contraseña en el formulario
de la página web de TanTán. Pulsa el botón de "INGRESAR".

2. Los datos del usuario son enviados vía websockets al servidor de TanTán,
iniciando una petición de autenticación.

3. El servidor de TanTán recibe los datos del usuario y verifica con la base
de datos principal su veracidad.

  * En caso SÍ de ser autenticado:

    1. El servidor recolecta toda la información acerca de permisos, roles y
    grupos asociados al usuario AUTENTICADO.

  * En caso NO de ser autenticado:

    1. El servidor recolecta toda la información acerca de permisos asociados
    a un usuario ANÓNIMO.

4. La respuesta de la petición de autenticación del servidor es enviada vía
websockets al cliente web del usuario. La respuesta consiste en la información
recolectada por el servidor acerca del usuario, particularmente los permisos
para suscribirse a los servicios de publicación de datos del sistema TanTán,
permitiendo al usuario recibir datos de manera casi instantanea en su cliente
web.

5. El cliente web se actualiza para desplegar las partes de la aplicación para
las cuales tenga permiso el usuario, además de suscribirse a torrentes de
datos, como los datos recibidos desde redes de sensores, dispositivos conecta-
dos a un puerto serial en el servidor de TanTán, notificaciones de cambios
en la base de datos, etc.
